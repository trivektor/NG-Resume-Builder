.page-header
  .row
    .col-lg-8
      %input#resume-name.editable-field.full-width{type: 'text', ng: {model: 'resume.name', blur: 'update()'}}
    .col-lg-4
      .block.block-sm.pull-right
        %span{tooltip: 'Add New Section'}
          %button.btn.btn-success{ng: {click: 'sections.add = !sections.add; sections.sort = false'}}
            %i.fa.fa-file-text
        %span{tooltip: 'Reorder Sections'}
          %button.btn.btn-primary{ng: {click: 'sections.sort = !sections.sort'}}
            %i.fa.fa-exchange
        %span{tooltip: 'View Resume'}
          %a.btn.btn-info{ng: {href: '{{ resume.live_url }}'}}
            %i.fa.fa-external-link

.row
  %section.col-lg-8
    %section.block{ng: {show: 'sections.add'}}
      %form{ng: {controller: 'NewSectionController', submit: 'create()'}}
        .form-group
          %label.control-label.sr-only Title
          %input.form-control{type: 'text', placeholder: 'Title', required: true, autofocus: true, ng: {model: 'title'}}

        .form-group
          %button.btn.btn-success.btn-sm
            %i.fa.fa-check
            Add
          or
          %a{ng: {click: 'sections.add = false'}} cancel

    %section{ng: {if: 'resume.sections.length', model: 'resume.sections'}, ui: {sortable: 'sortableOptions'}}
      %section.block{ng: {class: '{"sortable-active": sections.sort}', repeat: 'section in resume.sections', controller: 'SectionController'}}
        .lead
          %input.editable-field.full-width{type: 'text', ng: {model: 'section.title', blur: 'update()'}}

        .well.well-sm.details{ng: {if: 'section.fields.length'}}
          %section.clearfix{ng: {repeat: 'field in section.fields', controller: 'FieldController'}}
            %input.editable-field{ng: {model: 'field.name', blur: 'update()'}, placeholder: 'Name'}
            %input.editable-field{ng: {model: 'field.value', blur: 'update()'}, placeholder: 'Value'}
            %i.fa.fa-trash-o.pull-right.text-danger.clickable{ng: {click: 'delete()'}, tooltip: 'remove'}

        %form.field-form{ng: {controller: 'NewFieldController', submit: 'create()', show: 'actions.add'}}
          .form-group
            %label.control-label.sr-only Name
            %input.form-control{type: 'text', placeholder: 'Name', ng: {model: 'name'}}

          .form-group
            %label.control-label.sr-only Value
            %textarea.form-control{placeholder: 'Value', ng: {model: 'value'}}

          .form-group
            %button.btn.btn-success.btn-xs
              %i.fa.fa-check
              Add
            or
            %a{ng: {click: 'actions.add = false'}} cancel

        %footer.actions{ng: {hide: 'actions.add'}}
          %button.btn.btn-danger.btn-xs{ng: {click: 'delete()'}}
            %i.fa.fa-trash-o
            Remove Section
          %button.btn.btn-info.btn-xs{ng: {click: 'actions.add = !actions.add'}}
            %i.fa.fa-plus
            Add Fields

  %aside.col-lg-4
    %form{class: 'resume-block'}
      .form-group
        %label.control-label.sr-only Description
        %textarea.form-control{type: 'text', rows: 4, placeholder: 'Describe your resume', ng: {model: 'resume.description', blur: 'update()'}}